{% load ing_filter %}

<div class="ingredient__block">
  {{ form.id }}
{#  <div style="display: none">#}
    <div>{{ form.DELETE }}</div>
    <div class="ing__labels">
      {% if form.ingredient.errors %}
        <div class="error__item">
          {{ form.ingredient.errors }}
        </div>
      {% endif %}

      <div class="ing__wrapper to__opacity">
        <label><em><span class="ing__number">{{ index|add:1 }}</span>. {{ form.ingredient.label }}:&nbsp;</em></label>
        <div class="choose__ing__button hover__elem">
          <em>
            <span class="checked__ing">
              <span class="selected__ing">
                {% if form.ingredient.value %}
                  {% with ing_obj=form.ingredient.field.queryset|get_item:form.ingredient.value %}
                    {{ ing_obj }}
                  {% endwith %}
                {% else %}
                  ---------
                {% endif %}
              </span>
            </span>
          </em>
          <svg class="arrow__down" width="17" height="17" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <ul class="ing__list">
            <li class="hover__elem">
              <label>
                <input type="radio" name="{{ form.ingredient.html_name }}" value="" {% if not form.ingredient.value %}checked{% endif %} hidden>
                <em class="ing__elem">---------</em>
              </label>
            </li>
            {% for ing in form.ingredient.field.queryset %}
              <li class="hover__elem">
                <label>
                  <input type="radio" name="{{ form.ingredient.html_name }}" value="{{ ing.id }}"
                         {% if form.ingredient.value|stringformat:"s" == ing.id|stringformat:"s" %}checked{% endif %} hidden>
                  <em class="ing__elem">{{ ing }}</em>
                </label>
              </li>
            {% endfor %}
          </ul>
        </div>
        <div class="svg__close hover__elem to__opacity__close">
          <svg width="17" height="17" fill="currentColor" viewBox="0 0 24 24" transform="" id="injected-svg"><!--Boxicons v3.0 https://boxicons.com | License  https://docs.boxicons.com/free--><path d="m7.76 14.83-2.83 2.83 1.41 1.41 2.83-2.83 2.12-2.12.71-.71.71.71 1.41 1.42 3.54 3.53 1.41-1.41-3.53-3.54-1.42-1.41-.71-.71 5.66-5.66-1.41-1.41L12 10.59 6.34 4.93 4.93 6.34 10.59 12l-.71.71z"></path></svg>
        </div>
      </div>
    </div>

  {% if form.amount.errors %}
    <div class="error__item">
      {{ form.amount.errors }}
    </div>
  {% endif %}

  <div class="form__label amount__unit__block">
    <div class="amount__block to__opacity">
      <label for="{{ form.amount.id_for_label }}" class=""><em>{{ form.amount.label }}:&nbsp;</em></label>
      {{ form.amount }}
    </div>

    {% if form.unit.errors %}
      <div class="error__item">
        {{ form.unit.errors }}
      </div>
    {% endif %}

    <div class="unit__wrapper to__opacity">
      <label><em>{{ form.unit.label }}:&nbsp;</em></label>
      <div class="unit__button hover__elem">
        <em>
          <span class="checked__unit">
            <span class="selected__unit">
              {% if form.unit.value %}
                {% for value, label in form.fields.unit.choices %}
                  {% if form.unit.value == value %}
                    {{ label }}
                  {% endif %}
                {% endfor %}
              {% else %}
                ---------
              {% endif %}
            </span>
          </span>
        </em>
        <svg class="arrow__down" width="17" height="17" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <ul class="unit__list">
          {% for value, label in form.fields.unit.choices %}
            <li class="hover__elem">
              <label>
                <input type="radio" name="{{ form.unit.html_name }}" value="{{ value }}"
                       {% if form.unit.value|stringformat:"s" == value|stringformat:"s" %}checked{% endif %} hidden>
                <em>{{ label }}</em>
              </label>
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</div>
